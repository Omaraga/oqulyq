<?php
/* @var $this yii\web\View */
/* @var $lesson \common\models\Lesson */
/* @var $currentTest \common\models\Test */
/* @var $prevTest \common\models\Test */
/* @var $nextTest \common\models\Test */

use yii\helpers\Url;
$settings = \common\models\Settings::find()->one();
$this->title = $lesson->title;
$js = <<<JS

$('.check-answer').click(function (e){
    e.preventDefault();
    console.log('hello')
    $('#exampleModal').modal('show');
    let isRight = $(this).data('right');
    if (isRight == 1){
        $('#exampleModal .right').removeClass('d-none');
        $('#exampleModal .wrong').addClass('d-none');
    }else{
        $('#exampleModal .wrong').removeClass('d-none');
        $('#exampleModal .right').addClass('d-none');
    }
    
});

JS;
$this->registerJs($js);
?>
<style>
    .tabs .tab-item.active{
        background-color: #ffffff;
    }
</style>

<main class="landing container">
    <h1 class="my-3 text-center"><?=$this->title;?></h1>
    <div class="row">
        <div class="col-12 tabs" style="background-color: #F3F6FC;border-radius: 24px;">
            <div class="row p-3">
                <a href="/lesson/index?id=<?=$lesson->id;?>" class="col-4 text-center tab-item py-3"; style="border-radius: 24px;">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <mask id="mask0_37_113" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="64" height="64">
                            <rect width="64" height="64" fill="#D9D9D9"/>
                        </mask>
                        <g mask="url(#mask0_37_113)">
                            <path d="M37 23.8667C37 23.6889 37.0667 23.5004 37.2 23.3013C37.3334 23.1004 37.5112 22.9333 37.7334 22.8C39.0667 22.1778 40.4889 21.7111 42 21.4C43.5112 21.0889 45.0667 20.9333 46.6667 20.9333C47.5112 20.9333 48.3227 20.9778 49.1014 21.0667C49.8783 21.1556 50.6667 21.2889 51.4667 21.4667C51.6889 21.5111 51.8889 21.6338 52.0667 21.8347C52.2445 22.0338 52.3334 22.2667 52.3334 22.5333C52.3334 22.9778 52.2 23.2996 51.9334 23.4987C51.6667 23.6996 51.3111 23.7333 50.8667 23.6C50.2 23.4667 49.5218 23.3778 48.832 23.3333C48.144 23.2889 47.4223 23.2667 46.6667 23.2667C45.2445 23.2667 43.8445 23.4107 42.4667 23.6987C41.0889 23.9884 39.8 24.3778 38.6 24.8667C38.1112 25.0444 37.7227 25.0329 37.4347 24.832C37.1449 24.6329 37 24.3111 37 23.8667ZM37 38.3333C37 38.1111 37.0667 37.8996 37.2 37.6987C37.3334 37.4996 37.5112 37.3333 37.7334 37.2C39.0223 36.6222 40.456 36.1778 42.0347 35.8667C43.6116 35.5556 45.1556 35.4 46.6667 35.4C47.5112 35.4 48.3227 35.4444 49.1014 35.5333C49.8783 35.6222 50.6667 35.7556 51.4667 35.9333C51.6889 35.9778 51.8889 36.1004 52.0667 36.3013C52.2445 36.5004 52.3334 36.7333 52.3334 37C52.3334 37.4444 52.2 37.7671 51.9334 37.968C51.6667 38.1671 51.3111 38.2 50.8667 38.0667C50.2 37.9333 49.5218 37.8444 48.832 37.8C48.144 37.7556 47.4223 37.7333 46.6667 37.7333C45.2889 37.7333 43.9227 37.8773 42.568 38.1653C41.2116 38.4551 39.9111 38.8667 38.6667 39.4C38.2223 39.6222 37.8329 39.6222 37.4987 39.4C37.1663 39.1778 37 38.8222 37 38.3333ZM37 31.0667C37 30.8889 37.0667 30.6889 37.2 30.4667C37.3334 30.2444 37.5112 30.0889 37.7334 30C39.0667 29.3778 40.4889 28.9111 42 28.6C43.5112 28.2889 45.0667 28.1333 46.6667 28.1333C47.5112 28.1333 48.3227 28.1884 49.1014 28.2987C49.8783 28.4107 50.6667 28.5556 51.4667 28.7333C51.6889 28.7778 51.8889 28.8889 52.0667 29.0667C52.2445 29.2444 52.3334 29.4667 52.3334 29.7333C52.3334 30.1778 52.2 30.4996 51.9334 30.6987C51.6667 30.8996 51.3111 30.9556 50.8667 30.8667C50.2 30.7333 49.5218 30.6444 48.832 30.6C48.144 30.5556 47.4223 30.5333 46.6667 30.5333C45.2889 30.5333 43.9227 30.6773 42.568 30.9653C41.2116 31.2551 39.9111 31.6667 38.6667 32.2C38.2223 32.3778 37.8329 32.3556 37.4987 32.1333C37.1663 31.9111 37 31.5556 37 31.0667ZM17.3334 42.8C19.6445 42.8 21.9005 43.0667 24.1014 43.6C26.3005 44.1333 28.4889 45 30.6667 46.2V20C28.7556 18.6222 26.6338 17.5884 24.3014 16.8987C21.9671 16.2107 19.6445 15.8667 17.3334 15.8667C15.7334 15.8667 14.3334 15.9662 13.1334 16.1653C11.9334 16.3662 10.6 16.7333 9.13337 17.2667C8.73337 17.4 8.44448 17.5893 8.26671 17.8347C8.08893 18.0782 8.00004 18.3556 8.00004 18.6667V42.7333C8.00004 43.2222 8.16715 43.5778 8.50137 43.8C8.83382 44.0222 9.22226 44.0444 9.66671 43.8667C10.6445 43.5111 11.7672 43.2444 13.0347 43.0667C14.3005 42.8889 15.7334 42.8 17.3334 42.8ZM33.3334 46.2C35.5112 45 37.7005 44.1333 39.9014 43.6C42.1005 43.0667 44.3556 42.8 46.6667 42.8C48.2667 42.8 49.7005 42.8889 50.968 43.0667C52.2338 43.2444 53.3556 43.5111 54.3334 43.8667C54.7778 44.0444 55.1663 44.0222 55.4987 43.8C55.8329 43.5778 56 43.2222 56 42.7333V18.6667C56 18.3556 55.9111 18.0889 55.7334 17.8667C55.5556 17.6444 55.2667 17.4444 54.8667 17.2667C53.4 16.7333 52.0667 16.3662 50.8667 16.1653C49.6667 15.9662 48.2667 15.8667 46.6667 15.8667C44.3556 15.8667 42.0329 16.2107 39.6987 16.8987C37.3663 17.5884 35.2445 18.6222 33.3334 20V46.2ZM32 49.2C31.6 49.2 31.2223 49.1556 30.8667 49.0667C30.5112 48.9778 30.1778 48.8444 29.8667 48.6667C27.9111 47.6 25.8889 46.8 23.8 46.2667C21.7112 45.7333 19.5556 45.4667 17.3334 45.4667C15.9556 45.4667 14.6 45.5778 13.2667 45.8C11.9334 46.0222 10.6223 46.4 9.33337 46.9333C8.3556 47.2889 7.44448 47.1556 6.60004 46.5333C5.7556 45.9111 5.33337 45.0667 5.33337 44V18.2C5.33337 17.5333 5.51115 16.9218 5.86671 16.3653C6.22226 15.8107 6.71115 15.4222 7.33337 15.2C8.88893 14.4889 10.5112 13.9778 12.2 13.6667C13.8889 13.3556 15.6 13.2 17.3334 13.2C19.9556 13.2 22.5112 13.5778 25 14.3333C27.4889 15.0889 29.8223 16.2 32 17.6667C34.1778 16.2 36.5112 15.0889 39 14.3333C41.4889 13.5778 44.0445 13.2 46.6667 13.2C48.4 13.2 50.1111 13.3556 51.8 13.6667C53.4889 13.9778 55.1111 14.4889 56.6667 15.2C57.2889 15.4222 57.7778 15.8107 58.1334 16.3653C58.4889 16.9218 58.6667 17.5333 58.6667 18.2V44C58.6667 45.0667 58.2116 45.9004 57.3014 46.5013C56.3894 47.1004 55.4 47.2 54.3334 46.8C53.1334 46.3111 51.8889 45.9671 50.6 45.768C49.3111 45.5671 48 45.4667 46.6667 45.4667C44.4445 45.4667 42.2889 45.7333 40.2 46.2667C38.1111 46.8 36.0889 47.6 34.1334 48.6667C33.8223 48.8444 33.4889 48.9778 33.1334 49.0667C32.7778 49.1556 32.4 49.2 32 49.2Z" fill="#565ADD"/>
                        </g>
                    </svg>
                    <h5 style="font-weight: 500;">Новые слова</h5>
                </a>
                <a href="/lesson/gramma?id=<?=$lesson->id;?>" class="col-4 text-center tab-item py-3"; style="border-radius: 24px;">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <mask id="mask0_37_119" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="64" height="64">
                            <rect width="64" height="64" fill="#D9D9D9"/>
                        </mask>
                        <g mask="url(#mask0_37_119)">
                            <path d="M33.3334 26.6667H43.0001C43.3556 26.6667 43.6668 26.5449 43.9334 26.3013C44.2001 26.056 44.3334 25.7333 44.3334 25.3333C44.3334 24.9333 44.2001 24.6107 43.9334 24.3653C43.6668 24.1218 43.3556 24 43.0001 24H33.3334C32.9334 24 32.6107 24.1218 32.3654 24.3653C32.1219 24.6107 32.0001 24.9333 32.0001 25.3333C32.0001 25.7333 32.1219 26.056 32.3654 26.3013C32.6107 26.5449 32.9334 26.6667 33.3334 26.6667ZM33.3334 40H43.0001C43.3556 40 43.6668 39.8782 43.9334 39.6347C44.2001 39.3893 44.3334 39.0667 44.3334 38.6667C44.3334 38.2667 44.2001 37.944 43.9334 37.6987C43.6668 37.4551 43.3556 37.3333 43.0001 37.3333H33.3334C32.9334 37.3333 32.6107 37.4551 32.3654 37.6987C32.1219 37.944 32.0001 38.2667 32.0001 38.6667C32.0001 39.0667 32.1219 39.3893 32.3654 39.6347C32.6107 39.8782 32.9334 40 33.3334 40ZM22.8667 28.6H25.1334C25.7556 28.6 26.2667 28.4 26.6667 28C27.0667 27.6 27.2668 27.0889 27.2668 26.4667V24.2C27.2668 23.5778 27.0667 23.0667 26.6667 22.6667C26.2667 22.2667 25.7556 22.0667 25.1334 22.0667H22.8667C22.2445 22.0667 21.7334 22.2667 21.3334 22.6667C20.9334 23.0667 20.7334 23.5778 20.7334 24.2V26.4667C20.7334 27.0889 20.9334 27.6 21.3334 28C21.7334 28.4 22.2445 28.6 22.8667 28.6ZM22.8667 41.9333H25.1334C25.7556 41.9333 26.2667 41.7333 26.6667 41.3333C27.0667 40.9333 27.2668 40.4222 27.2668 39.8V37.5333C27.2668 36.9111 27.0667 36.4 26.6667 36C26.2667 35.6 25.7556 35.4 25.1334 35.4H22.8667C22.2445 35.4 21.7334 35.6 21.3334 36C20.9334 36.4 20.7334 36.9111 20.7334 37.5333V39.8C20.7334 40.4222 20.9334 40.9333 21.3334 41.3333C21.7334 41.7333 22.2445 41.9333 22.8667 41.9333ZM15.0001 53.3333C13.7556 53.3333 12.7227 52.9227 11.9014 52.1013C11.0783 51.2782 10.6667 50.2444 10.6667 49V15C10.6667 13.7556 11.0783 12.7227 11.9014 11.9013C12.7227 11.0782 13.7556 10.6667 15.0001 10.6667H49.0001C50.2445 10.6667 51.2783 11.0782 52.1014 11.9013C52.9227 12.7227 53.3334 13.7556 53.3334 15V49C53.3334 50.2444 52.9227 51.2782 52.1014 52.1013C51.2783 52.9227 50.2445 53.3333 49.0001 53.3333H15.0001ZM15.0001 50.6667H49.0001C49.4445 50.6667 49.833 50.4996 50.1654 50.1653C50.4996 49.8329 50.6667 49.4445 50.6667 49V15C50.6667 14.5556 50.4996 14.1671 50.1654 13.8347C49.833 13.5005 49.4445 13.3333 49.0001 13.3333H15.0001C14.5556 13.3333 14.1672 13.5005 13.8347 13.8347C13.5005 14.1671 13.3334 14.5556 13.3334 15V49C13.3334 49.4445 13.5005 49.8329 13.8347 50.1653C14.1672 50.4996 14.5556 50.6667 15.0001 50.6667Z" fill="#565ADD"/>
                        </g>
                    </svg>

                    <h5 style="font-weight: 500;">Грамматика к уроку</h5>
                </a>
                <a href="/lesson/task?id=<?=$lesson->id;?>" class="col-4 text-center active tab-item py-3"; style="border-radius: 24px;">
                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <mask id="mask0_37_125" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="64" height="64">
                            <rect width="64" height="64" fill="#D9D9D9"/>
                        </mask>
                        <g mask="url(#mask0_37_125)">
                            <path d="M28.6 20.6H45.3333C45.7333 20.6 46.056 20.4773 46.3013 20.232C46.5449 19.9884 46.6667 19.6667 46.6667 19.2667C46.6667 18.9111 46.5449 18.6 46.3013 18.3333C46.056 18.0667 45.7333 17.9333 45.3333 17.9333H28.6C28.2444 17.9333 27.9333 18.0667 27.6667 18.3333C27.4 18.6 27.2667 18.9111 27.2667 19.2667C27.2667 19.6667 27.4 19.9884 27.6667 20.232C27.9333 20.4773 28.2444 20.6 28.6 20.6ZM28.6 28H45.3333C45.7333 28 46.056 27.8782 46.3013 27.6347C46.5449 27.3893 46.6667 27.0667 46.6667 26.6667C46.6667 26.2667 46.5449 25.944 46.3013 25.6987C46.056 25.4551 45.7333 25.3333 45.3333 25.3333H28.6C28.2444 25.3333 27.9333 25.4551 27.6667 25.6987C27.4 25.944 27.2667 26.2667 27.2667 26.6667C27.2667 27.0667 27.4 27.3893 27.6667 27.6347C27.9333 27.8782 28.2444 28 28.6 28ZM28.6 35.4H37.3333C37.7333 35.4 38.056 35.2667 38.3013 35C38.5449 34.7333 38.6667 34.4222 38.6667 34.0667C38.6667 33.6667 38.5449 33.344 38.3013 33.0987C38.056 32.8551 37.7333 32.7333 37.3333 32.7333H28.6C28.2444 32.7333 27.9333 32.8551 27.6667 33.0987C27.4 33.344 27.2667 33.6667 27.2667 34.0667C27.2667 34.4222 27.4 34.7333 27.6667 35C27.9333 35.2667 28.2444 35.4 28.6 35.4ZM19.0667 21.3333C19.6444 21.3333 20.1333 21.1333 20.5333 20.7333C20.9333 20.3333 21.1333 19.8444 21.1333 19.2667C21.1333 18.7333 20.9333 18.256 20.5333 17.8347C20.1333 17.4116 19.6444 17.2 19.0667 17.2C18.5333 17.2 18.056 17.4116 17.6347 17.8347C17.2116 18.256 17 18.7333 17 19.2667C17 19.8444 17.2116 20.3333 17.6347 20.7333C18.056 21.1333 18.5333 21.3333 19.0667 21.3333ZM19.0667 28.7333C19.6444 28.7333 20.1333 28.5218 20.5333 28.0987C20.9333 27.6773 21.1333 27.2 21.1333 26.6667C21.1333 26.1333 20.9333 25.6551 20.5333 25.232C20.1333 24.8107 19.6444 24.6 19.0667 24.6C18.5333 24.6 18.056 24.8107 17.6347 25.232C17.2116 25.6551 17 26.1333 17 26.6667C17 27.2 17.2116 27.6773 17.6347 28.0987C18.056 28.5218 18.5333 28.7333 19.0667 28.7333ZM19.0667 36.1333C19.6444 36.1333 20.1333 35.9218 20.5333 35.4987C20.9333 35.0773 21.1333 34.6 21.1333 34.0667C21.1333 33.4889 20.9333 33 20.5333 32.6C20.1333 32.2 19.6444 32 19.0667 32C18.5333 32 18.056 32.2 17.6347 32.6C17.2116 33 17 33.4889 17 34.0667C17 34.6 17.2116 35.0773 17.6347 35.4987C18.056 35.9218 18.5333 36.1333 19.0667 36.1333ZM8 48.3333V12.3333C8 11.0889 8.41156 10.0551 9.23467 9.232C10.056 8.41067 11.0889 8 12.3333 8H51.6667C52.9111 8 53.9449 8.41067 54.768 9.232C55.5893 10.0551 56 11.0889 56 12.3333V41C56 42.2444 55.5893 43.2782 54.768 44.1013C53.9449 44.9227 52.9111 45.3333 51.6667 45.3333H16.2L11.6667 49.8667C11 50.5333 10.2222 50.6889 9.33333 50.3333C8.44444 49.9778 8 49.3111 8 48.3333ZM10.6667 47.0667L15.0667 42.6667H51.6667C52.1556 42.6667 52.5556 42.5111 52.8667 42.2C53.1778 41.8889 53.3333 41.4889 53.3333 41V12.3333C53.3333 11.8444 53.1778 11.4444 52.8667 11.1333C52.5556 10.8222 52.1556 10.6667 51.6667 10.6667H12.3333C11.8444 10.6667 11.4444 10.8222 11.1333 11.1333C10.8222 11.4444 10.6667 11.8444 10.6667 12.3333V47.0667ZM10.6667 12.3333V10.6667V47.0667V12.3333Z" fill="#565ADD"/>
                        </g>
                    </svg>

                    <h5 style="font-weight: 500;">Задания на проверку</h5>
                </a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12 mt-2">
            <h4 class="text-center my-3"><?=$currentTest->question;?></h4>
            <div class="row">
                <div class="col-6 p-3">
                    <button class="btn btn-primary w-100 check-answer" data-right="0"><?=$currentTest->wrong_answer_1;?></button>
                </div>
                <div class="col-6 p-3">
                    <button class="btn btn-primary w-100 check-answer" data-right="1"><?=$currentTest->right_answer;?></button>
                </div>
            </div>
            <div class="row">
                <div class="col-6 p-3">
                    <button class="btn btn-primary w-100 check-answer" data-right="0"><?=$currentTest->wrong_answer_3;?></button>
                </div>
                <div class="col-6 p-3">
                    <button class="btn btn-primary w-100 check-answer" data-right="0"><?=$currentTest->wrong_answer_2;?></button>
                </div>
            </div>
            <div class="p-3" style="display: flex; flex-direction: row; justify-content: space-between;">
                <div style="width: 100px;">
                    <a href="<?=$prevTest ?'/lesson/task?id='.$lesson->id.'&task='.$prevTest->id : '#';?>" class="btn btn-info <?=$prevTest ? '':'disabled';?>" >Предыдущий</a>
                </div>
                <div style="width: 100px;">
                    <a href="<?=$nextTest ?'/lesson/task?id='.$lesson->id.'&task='.$nextTest->id : '#';?>" class="btn btn-danger <?=$nextTest ? '':'disabled';?>">Следующий</a>
                </div>
            </div>


        </div>

    </div>

</main>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="right text-center d-none">
                    <img src="/img/right.png" alt="" style="width: 150px;">
                    <span style="color: #6fc84a; font-weight: bold; font-size: 40px;">Правильно</span>
                </div>
                <div class="wrong text-center d-none">
                    <img src="/img/wrong.png" alt="" style="width: 120px;">
                    <span style="color: red; font-weight: bold; font-size: 40px;"> Не правильно</span>
                </div>
            </div>
        </div>
    </div>
</div>